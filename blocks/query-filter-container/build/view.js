document.addEventListener("DOMContentLoaded",function(){function e(e,t){const n=e.getAttribute("data-tag-slug"),c=e.classList.contains("query-filter-tag-button--selected");let i=t.value?t.value.split(",").filter(Boolean):[];c?(i=i.filter(function(e){return e!==n}),e.classList.remove("query-filter-tag-button--selected"),e.setAttribute("aria-pressed","false")):(i.includes(n)||i.push(n),e.classList.add("query-filter-tag-button--selected"),e.setAttribute("aria-pressed","true")),t.value=i.join(",")}document.querySelectorAll(".query-filter-form").forEach(function(t){const n=t.querySelectorAll(".query-filter-tag-button"),c=t.querySelector('input[name="tag"]');n.length>0&&c&&n.forEach(function(t){t.addEventListener("click",function(n){n.preventDefault(),e(t,c)}),t.addEventListener("keydown",function(n){" "!==n.key&&"Enter"!==n.key||(n.preventDefault(),e(t,c))})}),t.querySelectorAll(".query-filter-date-picker").forEach(function(e){e.addEventListener("change",function(){const n=e.id.replace("-picker",""),c=t.querySelector("#"+n);c&&(c.value=e.value)}),e.addEventListener("click",function(){if("function"==typeof e.showPicker)try{e.showPicker()}catch(e){}})}),t.querySelectorAll(".query-filter-calendar-icon").forEach(function(e){e.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();const c=e.getAttribute("for"),i=t.querySelector("#"+c);if(i)if(i.focus(),"function"==typeof i.showPicker)try{i.showPicker()}catch(e){console.warn("showPicker failed:",e);const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});i.dispatchEvent(t)}else{const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});i.dispatchEvent(e)}})}),t.querySelectorAll(".query-filter-date-display").forEach(function(e){e.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();const c=e.id+"-picker",i=t.querySelector("#"+c);if(i)if(i.focus(),"function"==typeof i.showPicker)try{i.showPicker()}catch(e){console.warn("showPicker failed:",e);const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});i.dispatchEvent(t)}else{const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});i.dispatchEvent(e)}})}),t.addEventListener("submit",function(){t.querySelectorAll('input[type="text"], input[type="date"]:not(.query-filter-date-picker)').forEach(function(e){e.value&&""!==e.value.trim()||e.removeAttribute("name")}),t.querySelectorAll("select:not([multiple])").forEach(function(e){e.value&&""!==e.value||e.removeAttribute("name")}),!c||c.value&&""!==c.value.trim()||c.removeAttribute("name")})})});